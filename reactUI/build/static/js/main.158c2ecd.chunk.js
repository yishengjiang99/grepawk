(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},132:function(e,t){},137:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(24),i=n.n(s),o=(n(62),n(54)),c=n(3),u=n(4),l=n(9),d=n(6),p=n(5);n(63),n(64),n(65);var m=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onNavBarClick=function(e){var t=e.target.className;"maximize"===t?a.setState((function(e){return{maximized:!e.maximized}})):"minimize"===t?a.setState((function(e){return{minimized:!e.minimized}})):"closee"===t&&(a.setState({closed:!0}),a.props.ipc("close",[a.props.pid]))},a.renderNavTop=function(){return r.a.createElement("div",{className:"title",onMouseDown:a.onNavbarMouseDown},r.a.createElement("button",{className:"closee",onClick:a.onNavBarClick},"x"),r.a.createElement("button",{className:"maximize",onClick:a.onNavBarClick},"[]"),r.a.createElement("button",{className:"minimize",onClick:a.onNavBarClick},"_"),r.a.createElement("p",{className:"title"},a.props.title))},a.onNavbarMouseDown=function(e){window.addEventListener("mousemove",a.onNavbarMouseMove),window.addEventListener("mouseup",a.onNavbarMouseUp);var t=e.clientX,n=e.clientY;a.setState({lastMouseX:t,lastMouseY:n,isDragging:!0})},a.onNavbarMouseUp=function(e){window.removeEventListener("mouseup",a.onNavbarMouseUp),window.removeEventListener("mousemove",a.onNavbarMouseMove)},a.onNavbarMouseMove=function(e){var t=e.clientX,n=e.clientY;if(!1!==a.state.dragging){var r=t-a.state.lastMouseX,s=n-a.state.lastMouseY;a.setState({left:a.state.left+r,top:a.state.top+s,lastMouseX:t,lastMouseY:n,maximized:!1,minimized:!1})}},a.onCornerMouseDown=function(e){window.addEventListener("mousemove",a.onCornerMouseMove),window.addEventListener("mouseup",a.onCornerMouseUp);var t=e.clientX,n=e.clientY;a.setState({lastMouseX:t,lastMouseY:n,maximized:!1,minimized:!1,isResizing:!0})},a.onCornerMouseUp=function(e){a.setState({isResizing:!1,lastMouseX:0,lastMouseY:0}),window.removeEventListener("mouseup",a.onCornerMouseUp),window.removeEventListener("mousemove",a.onCornerMouseUp)},a.onCornerMouseMove=function(e){var t=e.clientX,n=e.clientY;if(!1!==a.state.isResizing){var r=t-a.state.lastMouseX,s=n-a.state.lastMouseY;a.setState({width:a.state.width+r,height:a.state.height+s,lastMouseX:t,lastMouseY:n})}},a.renderFooter=function(){return r.a.createElement("div",{className:"footer",onMouseDown:a.onCornerMouseDown},r.a.createElement("span",null,a.props.windowInfo),r.a.createElement("span",{className:"corner",style:{float:"right"}}))},a.state={minimized:!1,maximized:!1,closed:!1,isResizing:!1,isDragging:!1,top:e.top||20,left:e.left||400,width:e.width||800,height:e.height||400,lastMouseX:0,lastMouseY:0},a}return Object(u.a)(n,[{key:"render",value:function(){if(this.state.closed)return null;var e="box";this.props.className&&(e=this.props.className+" "+e);var t={top:this.state.maximized?0:this.state.top,left:this.state.maximized?0:this.state.left,width:this.state.maximized?"100%":this.state.width,cursor:this.state.isResizing?"se-resize":"cursor",height:this.state.minimized?18:this.state.maximized?"100%":this.state.height,zIndex:10};return r.a.createElement("div",{className:e,style:t},this.renderNavTop(),r.a.createElement("div",{className:"body"},this.props.children),r.a.createElement("div",{className:"footer",onMouseDown:this.onCornerMouseDown},r.a.createElement("span",null,this.props.windowInfo),r.a.createElement("span",{className:"corner",style:{cursor:"se-resize",float:"right"}})))}}]),n}(r.a.Component),f=(n(66),n(67).Parser,function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderHeaders=function(){return a.props.headers?r.a.createElement("thead",null,r.a.createElement("tr",{key:"tbtrh1"},a.props.headers.map((function(e,t){return r.a.createElement("th",{key:"th"+t},e)})))):null},a.renderLink=function(e,t){return r.a.createElement("span",{ref:r.a.createRef(),className:"terminal-link",onClick:function(){a.props.clickedCmd(e)}},t)},a.renderBody=function(){return a.props.rows?r.a.createElement("tbody",null,a.props.rows.map((function(e){return a.renderTableRow(e)}))):null},a.renderTableRow=function(e){return r.a.createElement("tr",null,a.props.headers.map((function(t){var n=e[t]||"";if("opts"==t){var s=n[0];return r.a.createElement("td",null,a.renderLink(s.cmd,s.desc))}if("thumbnail"===t){var i=n;return r.a.createElement("td",null,r.a.createElement("img",{width:120,src:i}))}return r.a.createElement("td",null,n)})))},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("table",{className:this.props.className||"table",border:"1"},this.renderHeaders(),this.renderBody())}}]),n}(r.a.Component)),h=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},r.a.createElement("h5",null,this.props.title),r.a.createElement("ul",null,this.props.list&&this.props.list.map?this.props.list.map((function(e,t){return r.a.createElement("li",{key:"list-"+t},r.a.createElement("h5",{className:"list-header"},e.title),r.a.createElement("div",{className:"list-body"},e.description))})):null))}}]),n}(r.a.Component),v=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){},a.renderFileSelectedList=function(){return r.a.createElement(h,{headers:["name","size","type"],rows:a.state.files_selected})},a.renderControlPanel=function(){return"new"===a.state.status?r.a.createElement("div",{className:"ctrl-panel"},r.a.createElement("button",{className:"btn btn-secondary",onClick:a.onCancel},"Cancel"),r.a.createElement("button",{className:"btn btn-primary",onClick:a.onSave}," Save")):r.a.createElement("div",null)},a.onFileChange=function(e){},a.onSave=function(e){},a.onCancel=function(e){alert("cancel")},a.state={files_selected:[],status:"new"},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"anchor"},r.a.createElement("input",{type:"file",className:"form-control",id:"file-select-input",name:"file",onChange:this.props.onFilesChange||this.onFileChange}),this.renderFileSelectedList(),this.renderControlPanel())}}]),n}(r.a.Component),g=n(1),b=n.n(g),w=n(2),y={RTCIceServers:[{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{url:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{url:"turn:192.158.29.39:3478?transport=tcp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}]},E=window.location.origin+"/ice";var k=function(e){(e=e||{}).console=e.console||"console";var t,n,a=e.hostname||E,r=e.onEvent||console.log,s={},i=[],o=new AudioContext,c=o.createAnalyser();function u(e,t,n){return{id:e,track:t,dimensions:n,live:!0}}function l(){Object.values(s).forEach((function(e){e.updateTracks(i)}))}return new Uint8Array(256),{requestUserStream:function(e){return new Promise(function(){var t=Object(w.a)(b.a.mark((function t(n,a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"screenshare"!=e){t.next=7;break}return t.next=4,navigator.mediaDevices.getDisplayMedia();case 4:r=t.sent,t.next=20;break;case 7:if("webcam"!=e){t.next=13;break}return t.next=10,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 10:r=t.sent,t.next=20;break;case 13:if("audio"!=e){t.next=19;break}return t.next=16,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 16:r=t.sent,t.next=20;break;case 19:a(new Error("Unkown type"));case 20:n(r||null),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),a(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e,n){return t.apply(this,arguments)}}())},addStream:function(e,t){e.getTracks().forEach((function(e){!function(e,t){for(var n in i)i[n].id===e.id&&(i[n]=u(e.id,e,t));i.push(u(e.id,e,t))}(e,t)})),l()},removeStream:function(e){return e.getTracks().forEach((function(e){!function(e){for(var t in i)i[t].id===e.id&&(i[t].live=!1)}(e),e.stop()})),l(),null},peerConnections:s,startBroadcast:function(e){(t=new WebSocket(a)).onmessage=function(e){var a=JSON.parse(e.data);switch(r(e.data.type||""),a.type){case"registered":n=a.host_uuid;break;case"user_joined":!function(e){if(!e.client_uuid)throw new Error("unexpected user_join request");s[e.client_uuid]=function(e,t,n,a){e=e,t=t;var r=new RTCPeerConnection(y),s=r.createDataChannel("metadata"),i={};function o(){if(!s||"open"!==s.readyState)return a("metadata channel not yet o0pen"),void setTimeout(o,1e3);var e=[];Object.keys(i).forEach((function(t){var n=i[t];e.push({trackId:n.id,dimensions:n.dimensions,live:n.active})}));var t={type:"mediaMetadata",data:e};a("sending metadata ",t),s.send(JSON.stringify(t))}return s.onopen=function(){a("Meta channel open with "+t),o()},r.onicecandidate=function(a){a.candidate&&e.send(JSON.stringify({type:"candidate",candidate:a.candidate,to_uuid:t,host_uuid:n}))},r.onnegotiationneeded=function(){var s=Object(w.a)(b.a.mark((function s(i){var o;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a("creating sdp offer for "+t),s.next=3,r.createOffer();case 3:return o=s.sent,s.next=6,r.setLocalDescription(o);case 6:e.send(JSON.stringify({type:"offer",to_uuid:t,offer:o,host_uuid:n}));case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),{updateTracks:function(e){for(var t in e){var n=e[t].id;"undefined"===typeof i[n]&&(i[n]=e[t],e[t].live&&r.addTrack(e[t].track))}o()},set_sdp_anwser:function(){var e=Object(w.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.setRemoteDescription(t);case 3:a("Remote Anwser set"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("ERROR: in set_dsp_anwser");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),addIceCandidate:function(e){a("add ice candidate "),r.addIceCandidate(e)}}}(t,e.client_uuid,n,r),s[e.client_uuid].updateTracks(i)}(a);break;case"answer":!function(e){if(!e.client_uuid||!e.answer)throw new Error("unexpected request in user_sent_peer_ice_candidate");s[e.client_uuid].set_sdp_anwser(e.answer)}(a);break;case"candidate":!function(e){if(!e.client_uuid||!e.candidate)throw new Error("unexpected request in user_sent_peer_ice_candidate");s[e.client_uuid].addIceCandidate(e.candidate),r("add peer ice candidate from "+e.client_uuid)}(a)}},t.onopen=function(n){var a,s;a={type:"register_stream",channel:e},s&&(a[s]=s),t.send(JSON.stringify(a)),r("Stream registered "+e)},t.onerror=function(e){return r("ERROR: signalconnection not connecting",e)}},audioMeter:c,audioCtx:o}},S=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).clickedSave=function(){a.props.onSubmit(a.state.answers)},a.renderBody=function(){var e=a.state.answers;return r.a.createElement("div",null,a.props.questions.map((function(t,n){var s=e[t]||"";return r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-6",for:"`input-${idx}`"},t),r.a.createElement("input",{className:"col-md-6",value:s,onChange:function(t){var n=t.target.name,r=t.target.value;e[n]=r,a.setState({answers:e})},type:"text",name:t,ref:"question "+n}))})))},a.state={answers:a.props.initialAnswers||{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.initialAnswers&&this.props.questions){var t={};this.props.questions.forEach((function(n,a){t[n]=e.props.initialAnswers[a]})),this.setState(t)}}},{key:"render",value:function(){var e=this.props.style||{display:"block",position:"fixed",width:"50vw",height:"80vh",top:"5vh",left:"25vw"};return r.a.createElement("div",{style:e,className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},this.props.title),r.a.createElement("button",{type:"button",className:"close",onClick:this.props.onClose,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,this.props.children||this.renderBody())),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.props.onClose},"Cancel"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.props.onSave||this.clickedSave},"Publish")))}}]),n}(r.a.Component),x=n(55),C=n.n(x),O=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).stdin=function(e){alert(e)},a.renderSuggestions=function(){return!1===a.state.isTyping?null:r.a.createElement("ul",{className:"list-group suggestions"},a.state.autoSuggestions.map((function(e,t){var n=t===a.state.autoSuggestionCursor?"list-group-item active":"list-group-item";return r.a.createElement("li",{className:n,onMouseEnter:function(e){a.setState({autoSuggestionCursor:t})},onClick:function(t){a.keyboardInput.current.value=e.cmd+" ",a.focusTextInput()}},r.a.createElement("b",null,e.cmd),": ",e.description)})))},a.updateAutoSuggest=function(e){var t=!e||e.split(" ").length<2,n=(!t&&e.split(" ").length,e&&e.split(" ").pop()||"");if(t){var r=a.verbSuggestions.filter((function(e){return!n||e.cmd.includes(n)}));a.setState({autoSuggestions:r})}},a.state={inputHistory:[],inputHistoryCursor:0,isTyping:!1,isFetchingSuggestion:!1,autoSuggestions:[],autoSuggestionCursor:0},a.keyboardInput=r.a.createRef(),a.focusTextInput=a.focusTextInput.bind(Object(l.a)(a)),a.verbSuggestions=e.verbSuggestions&&a.props.verbSuggestions.map((function(e){return{cmd:e,description:e}}))||[{cmd:"search",description:"disocver files and file content"},{cmd:"compose",description:"create content"},{cmd:"request",description:"request document, script, or live consulting"},{cmd:"neighbors",description:"visit a neighbor and discover their content"},{cmd:"radio",description:"listen to radio"},{cmd:"share",description:"share security peer-to-peer"},{cmd:"broadcast",description:"live stream"},{cmd:"connect",description:"with people or IP addresses"}],a}return Object(u.a)(n,[{key:"focusTextInput",value:function(){this.keyboardInput.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focusTextInput(),this.updateAutoSuggest()}},{key:"render",value:function(){var e=this,t=this.props.searchBarStyle||{position:"fixed",right:150,top:160,zIndex:-10},n=this.props.searchBarStyleTyping||{position:"fixed",right:150,top:40,zIndex:"1 !important"};return r.a.createElement("div",{className:"md-col-6",style:!1===this.state.isTyping?t:n},r.a.createElement("input",{ref:this.keyboardInput,onClick:this.focusTextInput,onFocus:function(){e.setState({isTyping:!0})},onBlur:function(){},onKeyDown:function(t){13==t.keyCode?(e.stdin(t.target.value),t.target.value=""):9==t.keyCode?e.setState({autoSuggestionCursor:e.state.autoSuggestionCursor+1}):32==t.keyCode?e.updateAutoSuggest(t.target.value):27===t.keyCode?e.setState({isTyping:!1}):e.updateAutoSuggest(t.target.value)},placeholder:this.state.isTyping?"type query":"are you feeling lucky?",className:"form-control",type:"text",size:this.props.size||80}),this.renderSuggestions())}}]),n}(r.a.Component),j=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onSave=function(){if(alert(a.props.value),a.props.vfs){var e=a.props.vfs.file_put_content(a.props.path,a.props.value);alert(e)}},a.editor=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(m,{width:1e3,height:600,left:220,ipc:this.props.ipc,icon:"computer",title:this.props.title},r.a.createElement(C.a,{mode:"java",theme:"github",onChange:function(){},name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0}}))}}]),n}(r.a.Component);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).WS_HOST);var N=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).WS_HOST||"".concat("https"==window.location.protocol?"wss":"ws","://").concat(window.location.host),_=window.location.origin,R=("".concat(N,"/ice"),n(19));function M(e){return fetch("".concat(_).concat(e),{method:"GET",headers:{accept:"application/json"}}).then((function(e){return e.json()}))}function T(){var e=localStorage.getItem("uuid");if(e&&"undefined"!==e)return e;e=function(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}(),localStorage.setItem("uuid",e)}var P=null,D={color:"red"},I=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onBroadcastEvent=function(e){alert(e)},a.composeCmd=function(e,t){},a.renderOutputRow=function(e,t){switch(e.type){case"compose":return r.a.createElement(j,{title:"Compose Tracks",phase:a.state.composerPhase,ipc:a.composeCmd});case"stdout":case"text":return r.a.createElement("pre",{key:"op-"+t},e.data);case"stderr":return r.a.createElement("pre",{key:"op-"+t},r.a.createElement("span",{style:D},e.data));case"stdin":return r.a.createElement("div",{className:"input-line",key:"op-"+t},r.a.createElement("div",{className:"prompt"},a.state.foregroundPid,">"),r.a.createElement("input",{className:"cmdline input-line",disabled:!0,value:e.cmd}));case"table":return r.a.createElement("div",{key:"op-"+t},r.a.createElement(f,{clickedCmd:a.stdin,className:"table table-dark",headers:e.data.headers,rows:e.data.rows}));case"imageLink":return r.a.createElement("div",{key:"op-"+t},r.a.createElement("img",{src:e.data}));case"filelink":return r.a.createElement("div",{key:"op-"+t},r.a.createElement("iframe",{src:e.data}));case"upload":return r.a.createElement(v,null)}},a.stdin=function(e){a.onAddOutputRow({type:"stdin",cmd:e}),a.locallyProcessed(e)||(P.readyState!==WebSocket.OPEN?a.onAddOutputRow({type:"stderr",data:"Not connected"}):P.send(e))},a.keyboardPressed=function(e){13==e.keyCode&&(a.stdin(e.target.value),e.target.value="")},a.clickOnTerminal=function(e){document.getElementById("terminal_input").focus()},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a.prompt=r.a.createRef(),a.promptInput=r.a.createRef(),a.broadclient=k({onEvent:a.onBroadcastEvent,console:"stdin2"}),a.state={socket:P,output_rows:[],output_cursor_position:0,uuid:T(),canvasStream:null,canvasStream2:null,foregroundPid:null,composerPhase:"root"},a.onMsg.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"initSocket",value:function(){var e=this;this.onAddOutputRow({type:"text",data:"Init.."+N}),(P=new WebSocket(N)).onopen=function(t){e.onAddOutputRow({type:"text",data:"CONNECTED"}),P.onmessage=e.onMsg,P.send("check-in "+e.state.uuid)}}},{key:"onMsg",value:function(e){if(e.data)if("object"===typeof e.data){var t=new Image;t.src=URL.createObjectURL(e.data),this.onAddOutputRow({type:"image",data:t})}else if(e.data.startsWith("stdout: ")){var n=e.data.replace("stdout: ","");this.onAddOutputRow({type:"text",data:n})}else if(e.data.startsWith("stderr: ")){n=e.data.replace("stderr: ","");this.onAddOutputRow({type:"text",data:n})}else{try{JSON.parse(e.data)}catch(e){this.onAddOutputRow({type:"text",data:n})}this.parseAPIResponse()}}},{key:"onAddOutputRow",value:function(e){var t=this.state.output_rows.concat(e);this.setState({output_rows:t})}},{key:"parseAPIResponse",value:function(e){e.stdout&&this.onAddOutputRow({type:"text",data:e.stdout}),e.stderr&&this.onAddOutputRow({type:"text",data:e.stderr}),e.table&&this.onAddOutputRow({type:"table",data:e.table}),e.userInfo&&(localStorage.setItem("uuid",e.userInfo.uuid),this.props.ipc("hud-update",e.userInfo)),e.quests&&this.props.ipc("questlist",e.quests),e.hint}},{key:"componentDidMount",value:function(){this.initSocket()}},{key:"keyboardLoaded",value:function(e){e.target.focus()}},{key:"windowLoaded",value:function(e){document.getElementsByClassName("terminal-body").scrollTo(0,100),e.target.offsetHeight=1e3}},{key:"locallyProcessed",value:function(e){if(!e)return!1;var t=e.split(" "),n=t[0],a=t.splice(1);if("compose"===this.state.foregroundPid)return this.setState({composerState:n}),!0;switch(n){case"compose":this.setState({foregroundPid:"compose"});break;case"upload":case"openimage":return this.onAddOutputRow({type:n,data:a[0]}),!0;case"edit":return this.props.ipc(n,a),!0;case"cam":case"new":case"stream":case"broadcast":case"draw":case"watch":return this.props.ipc(n,a),!0;default:return!1}}},{key:"renderInputBar",value:function(){var e=this.state.foregroundPid||"";return r.a.createElement("div",{className:"input-line"},r.a.createElement("div",{id:"stdin-prompt",className:"prompt"},e,">"," "),r.a.createElement("input",{autoFocus:!0,onLoad:this.keyboardLoaded,onKeyDown:this.keyboardPressed,size:"80",id:"terminal_input",autoComplete:"off",className:"cmdline input-line"}))}},{key:"render",value:function(){var e=this;return r.a.createElement(m,{className:"terminal",title:this.props.title,pid:this.props.pid,ipc:this.props.ipc},r.a.createElement("div",{style:{color:"white",backgroundColor:"black"},className:"terminal-body",onClick:this.clickOnTerminal},this.state.output_rows.map((function(t,n){return e.renderOutputRow(t,n)})),this.renderInputBar(),r.a.createElement("div",{className:"terminal-anchor",ref:function(t){e.messagesEnd=t}}," ")))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}}]),n}(r.a.Component),A={float:"right",marginRight:"15px",height:"20px"},B=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("span",{style:A,className:"HUD"},"Name: ",this.props.fname||this.props.username||"guest",", Location: ",this.props.cwd||"root",", XP Level:",this.props.xp||0,", Gold:",this.props.points||0)}}]),n}(r.a.Component),z=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.video.srcObject=this.props.media}},{key:"shouldComponentUpdate",value:function(e){return this.props.media!==e.media}},{key:"componentDidUpdate",value:function(){this.video.srcObject=this.props.media}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,s=t.muted,i=t.children;return r.a.createElement("video",{height:a,width:n,muted:s,autoPlay:!0,playsInLine:!0,ref:function(t){e.video=t}},i)}}]),n}(r.a.Component);z.defaultProps={children:null,height:420,width:640,muted:!0,media:null};var F,L,U=z,q={RTCIceServers:[{url:"stun:stun.l.google.com:19302"},{url:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{url:"turn:192.158.29.39:3478?transport=tcp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}],optional:[{DtlsSrtpKeyAgreement:!0}]},J=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={enteredRoom:!1,signalConnected:!1,videoOn:!0,audioOn:!0,flashMessage:"",error:null,myStream:null,room:a.props.room||"default",isHost:null,remoteStreams:[]},a.joinRoom=Object(w.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({enteredRoom:!0}),F.send(JSON.stringify({type:"login",channel:a.state.room,uuid:a.props.userInfo.uuid}));case 2:case"end":return e.stop()}}),e)}))),a.initiateRTCPeerConnection=function(){return(L=new RTCPeerConnection(q)).ontrack=function(e){if(e.streams&&e.streams[0]){var t=a.state.remoteStreams.concat(e.streams[0]);a.setState({remoteStreams:t})}},L.onicecandidateerror=function(e){a.setState({flashMessage:e.message})},L.onicecandidate=function(e){null!=e.candidate&&F.send(JSON.stringify({type:"candidate",candidate:e.candidate,channel:a.state.room}))},L},a.onLoggedInWithSignalServer=function(e){a.setState({signalConnected:!0}),1!=e.usersCount?(a.initiateRTCPeerConnection(),L.onnegotiationneeded=function(e){L.createOffer().then((function(e){L.setLocalDescription(e),F.send(JSON.stringify({type:"offer",offer:e,channel:a.state.room}))})).catch((function(e){alert(e.message)}))},a.state.myStream.getTracks((function(e){L.addTrack(e,a.state.myStream)})),L.createOffer().then((function(e){L.setLocalDescription(e),F.send(JSON.stringify({type:"offer",offer:e,channel:a.state.room}))})).catch((function(e){alert(e.message)}))):a.setState({flashMessage:"Joined channel "+e.channelJoined+". Only you here."})},a.onReceivedRemoteConnectionOffer=function(e){a.initiateRTCPeerConnection(),L.setRemoteDescription(new RTCSessionDescription(e.offer)).then((function(){a.state.myStream.getTracks().forEach((function(e){L.addTrack(e,a.state.myStream)}))})).then((function(){return L.createAnswer()})).then((function(e){return L.setLocalDescription(e),e})).then((function(t){F.send(JSON.stringify({type:"answer",answer:t,channel:e.channel,uuid:e.caller_id}))})).catch((function(e){console.log(e),a.setState({flashMessage:e.message+" on receive remote errored"})}))},a.onReceivedConnectionRequestResponse=function(e){e.answer.sdp&&L.setRemoteDescription(e.answer).then((function(){return navigator.mediaDevices.getDisplayMedia()})).then((function(e){e.getTracks().forEach((function(t){return L.addTrack(t,e)}))}))},a.onReceivedICECandidate=function(e){L.addIceCandidate(e.candidate).catch((function(e){console.log("Failure during addIceCandidate(): "+e.name)}))},a.chatRoomChanged=function(e){var t=e.target.value;a.setState({room:t})},a.audioCheckBoxChanged=function(e){a.setState({audioOn:e.target.value})},a.videoCheckBoxChanged=function(e){a.setState({videoOn:e.target.value})},a.gotMyStream=function(e){a.setState({myStream:e})},a.renderLobby=function(){return r.a.createElement("div",{className:"cam-lobby"},r.a.createElement("p",null,a.state.flashMessage),r.a.createElement(U,{width:300,media:a.state.myStream}),r.a.createElement("p",null,"Join Room: ",r.a.createElement("input",{id:"join_room_name",onChange:a.chatRoomChanged,value:a.state.room,type:"text",size:"50"})),r.a.createElement("p",null,"Audio: ",r.a.createElement("input",{id:"join_room_audio",onChange:a.audioCheckBoxChanged,type:"checkbox",checked:!0})),r.a.createElement("p",null,"Video: ",r.a.createElement("input",{id:"join_room_video",onChange:a.videoCheckBoxChanged,type:"checkbox",checked:!0})),r.a.createElement("p",null,r.a.createElement("button",{onClick:a.joinRoom},"Go")," "))},a.renderRoom=function(){return r.a.createElement("div",{className:"cam-room"},r.a.createElement("h3",null,"Room ",a.state.room),r.a.createElement("p",null,a.state.flashMessage),r.a.createElement(U,{key:"mstream",width:200,height:100,media:a.state.myStream}),a.state.remoteStreams.map((function(e,t){return console.log(e),r.a.createElement(U,{key:"remote-stream-"+t,width:100,height:100,media:e})})))},a.onClosed=function(){},a.videoRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(b.a.mark((function e(){var t,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(F=new WebSocket("ws://localhost:9090")).onopen=function(e){n.setState({signalConnected:!0})},F.onmessage=function(e){try{var t=JSON.parse(e.data);console.log("signal on msg ",e),"login"===t.type?n.onLoggedInWithSignalServer(t):"offer"===t.type?t.offer.sdp?n.onReceivedRemoteConnectionOffer(t):console.log("signal ret offer not contrain sdp",t):"answer"===t.type?n.onReceivedConnectionRequestResponse(t):"candidate"===t.type?n.onReceivedICECandidate(t):"error"===t.type&&n.setState({flashMessage:t.message})}catch(a){console.log("signal onmsg failed",a)}},e.prev=3,e.next=6,navigator.mediaDevices.getDisplayMedia();case 6:t=e.sent,this.setState({myStream:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({error:e.t0.message});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.onClosed()}},{key:"render",value:function(){return r.a.createElement(m,{className:"camera",title:this.props.title,pid:this.props.pid,ipc:this.props.ipc},null!==this.state.error?r.a.createElement("div",null,"Error: ",this.state.error):0==this.state.signalConnected||null==this.state.myStream?r.a.createElement("div",null,"Connecting.."):0==this.state.enteredRoom?this.renderLobby():this.renderRoom())}}]),n}(r.a.Component),W=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderVideo=function(e){return r.a.createElement(U,{width:"100%",height:"100%",media:e})},a.renderText=function(e){return r.a.createElement("div",null,e)},a.renderImage=function(e){return r.a.createElement("img",{src:e})},a.renderCanvas=function(e){new Uint8Array(e.fftSize);return null},a.renderAudio=function(e){return r.a.createElement("audio",{width:"100%",height:"100%",srcObject:e,muted:!1,autoPlay:!0,controls:!0})},a.state={dimensions:e.mediaObject[2]},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.mediaObject[0],t=this.props.mediaObject[1],n=this.state.dimensions,a=(this.props.mediaObject[3],{position:"absolute",left:n[0]+"%",top:n[1]+"%",width:n[2]+"%",height:n[3]+"%"});return r.a.createElement("div",{draggable:!0,style:a},"video"==e?this.renderVideo(t):null,"screenshare"==e?this.renderVideo(t):null,"webcam"==e?this.renderVideo(t):null,"audioMeter"==e?this.renderCanvas(t):null,"audio"==e?this.renderAudio(t):null,"text"==e?this.renderText(t):null,"image"==e?this.renderImage(t):null)}}]),n}(r.a.Component),Y=(n(130),{screenshare:[0,0,100,100],webcam:[80,80,20,20],audio:[70,0,30,10],text:[5,5,80,10],picture:[0,10,20,20],audioMeter:[0,0,20,20]}),V=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={screenshare:!1,webcam:!1,audio:!1,streamElements:{},additionalStreamParts:[],broadcasting:!1,broadcastEvents:[]},a.onBroadcastEvent=function(e){var t=a.state.broadcastEvents;t.push(e),a.setState({broadcastEvents:t})},a.updateStreamElements=function(e,t,n,r){var s=a.state.streamElements;s[e]=[e,t,n,r],null!==t&&!0===a.state.broadcasting&&(a.broadcastClient.addStream(t,n),a.onBroadcastEvent("Adding stream "+e)),a.setState({streamElements:s})},a.updateAdditionalStreamElements=function(e,t,n){var r=a.state.additionalStreamParts;r.push([e,t,n]),a.setState({additionalStreamParts:r}),null!==t&&!0===a.state.broadcasting&&(a.broadcastClient.addStream(t,n),a.onBroadcastEvent("Adding stream "+e))},a.renderObjectives=function(){},a.renderPreview=function(){var e=Object.keys(a.state.streamElements);return r.a.createElement("div",null,e.map((function(e){return r.a.createElement(W,{mediaObject:a.state.streamElements[e]})})),a.state.additionalStreamParts.map((function(e){return r.a.createElement(W,{mediaObject:e})})))},a.controlClicked=function(){var e=Object(w.a)(b.a.mark((function e(t){var n,r,s,i,o,c,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!a.state[t],r=a.state.streamElements[t]&&a.state.streamElements[t][1]||null,o=a.broadcastClient.audioCtx,(i=document.createElement("audio")).controls=!0,i.muted=!0,e.t0=t,e.next="screenshare"===e.t0?9:"webcam"===e.t0?22:"audio"===e.t0?35:"text"===e.t0?54:"picture"===e.t0?57:60;break;case 9:if(!n){e.next=15;break}return e.next=12,a.broadcastClient.requestUserStream(t);case 12:e.t1=e.sent,e.next=18;break;case 15:return e.next=17,a.broadcastClient.removeStream(r);case 17:e.t1=e.sent;case 18:return s=e.t1,a.updateStreamElements(t,s,Y[t]),a.setState({screenshare:n}),e.abrupt("break",61);case 22:if(!n){e.next=28;break}return e.next=25,a.broadcastClient.requestUserStream(t);case 25:e.t2=e.sent,e.next=31;break;case 28:return e.next=30,a.broadcastClient.removeStream(r);case 30:e.t2=e.sent;case 31:return s=e.t2,a.updateStreamElements(t,s,Y[t]),a.setState({webcam:n}),e.abrupt("break",61);case 35:if(!n){e.next=41;break}return e.next=38,a.broadcastClient.requestUserStream(t);case 38:e.t3=e.sent,e.next=44;break;case 41:return e.next=43,a.broadcastClient.removeStream(r);case 43:e.t3=e.sent;case 44:return s=e.t3,a.setState({audio:n}),i.srcObject=s,o.createMediaStreamSource(s).connect(a.broadcastClient.audioMeter).connect(o.destination),c=o.createMediaStreamDestination().stream,a.updateStreamElements(t,c,Y[t]),a.updateAdditionalStreamElements("audioMeter",a.broadcastClient.audioMeter,Y.audioMeter),a.setState({audio:n}),e.abrupt("break",61);case 54:return u=prompt("Enter Text"),a.updateAdditionalStreamElements("text",u,Y[t]),e.abrupt("break",61);case 57:return l=prompt("Enter Picture URL"),a.updateAdditionalStreamElements("text",l,Y[t]),e.abrupt("break",61);case 60:return e.abrupt("break",61);case 61:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderConsole=function(){return r.a.createElement("div",null,a.state.broadcastEvents.map((function(e){var t;return t="object"===typeof e?JSON.stringify(e):e,r.a.createElement("p",null,t)})))},a.startBroadcasting=Object(w.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.channelName||(a.channelName=prompt("What channel name do you want?")),a.channelName){e.next=3;break}return e.abrupt("return");case 3:window.confirm("Start broadcasting at https://www.grepawk.com/watch/"+a.channelName+" now?")&&(a.broadcastClient.startBroadcast(a.channelName),Object.values(a.state.streamElements).forEach((function(e){null!==e[1]&&a.broadcastClient.addStream(e[1],e[2])})),a.setState({broadcasting:!0}));case 5:case"end":return e.stop()}}),e)}))),a.stopBroadcasting=function(){a.setState({broadcasting:!1})},a.renderControls=function(){return r.a.createElement("ul",{className:"list-group controls"},["screenshare","webcam","audio","picture","text"].map((function(e){var t=a.state[e],n=t?e+" off":e,s=t?"btn btn-secondary":"btn btn-primary";return r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{className:s,onClick:function(){a.controlClicked(e)}},n))})))},a.renderHeader=function(){return r.a.createElement("div",{className:"header"},!1===a.state.broadcasting?r.a.createElement("a",{href:"javascript://",onClick:a.startBroadcasting},"Start Broadcast  "):r.a.createElement("a",{href:"javascript://",onClick:a.stopBroadcasting},"Stop Broadcast"))},a.broadcastClient=k({onEvent:a.onBroadcastEvent,console:"console"}),a.channelName=a.props.args[0],a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(m,{width:900,height:700,left:120,className:"stream",title:this.props.title,pid:this.props.pid,ipc:this.props.ipc,draggable:!1},this.state.flashMessage?r.a.createElement("div",null,this.state.flashMessage):null,r.a.createElement("div",{className:"obs"},this.renderHeader(),this.renderControls(),r.a.createElement("div",{className:"preview",ref:this.previewDiv},this.renderPreview()),r.a.createElement("div",{className:"console"},this.renderConsole()),r.a.createElement("div",{className:"objectives"},this.renderObjectives())))}}]),n}(r.a.Component),H="localhost"==window.location.hostname?"ws://localhost:9091":"wss://grepawk.com/signal",X={RTCIceServers:[{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{url:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{url:"turn:192.158.29.39:3478?transport=tcp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}]};var G=function(e){var t,n,a,r=e.hostname||H,s=e.onEvent||console.log,i=e.mediaObjectReady,o=(e.mediaObjectOffline,{}),c={};function u(){return(u=Object(w.a)(b.a.mark((function e(r,u){var l,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){for(var e in s("showing remote tracks: "+Object.keys(c).length),c){var t=c[e];if(o[e]){var n=new MediaStream;n.addTrack(o[e]),i(e,n,o[e].kind,t.dimensions),s("showing tracking ")}else s("Got meta data but not track")}},a=u,(n=new RTCPeerConnection(X)).ondatachannel=function(e){e.channel.onopen=function(){return s("metadata channel on client open")},e.channel.onmessage=function(e){s("got metadata "+e.data);var t=JSON.parse(e.data);"mediaMetadata"==t.type&&t.data.forEach((function(e){var t=e.trackId;c[t]=e}));l()}},n.onicecandidate=function(e){s("client on ice candidate ",e),e.candidate&&t.send(JSON.stringify({type:"candidate",to_uuid:a,candidate:e.candidate}))},n.ontrack=function(e){e.track&&(o[e.track.id]=e.track),l()},e.next=8,n.setRemoteDescription(new RTCSessionDescription(r));case 8:return e.next=10,n.createAnswer();case 10:d=e.sent,n.setLocalDescription(d),t.send(JSON.stringify({type:"answer",to_uuid:a,answer:d}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{watchChannel:function(e){(t=new WebSocket(r)).onopen=function(a){t.send(JSON.stringify({type:"watch_stream",channel:e})),t.onmessage=function(e){var t=JSON.parse(e.data);switch(s("Signal Server msg type "+t.type),t.type){case"offer":s("got offer: host_uuid=",t.host_uuid),function(e,t){u.apply(this,arguments)}(t.offer,t.host_uuid);break;case"candidate":s("got candidate"),n.addIceCandidate(t.candidate);break;case"error":s("Error: "+t.message)}}}}}},K=(n(131),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={broadcastEvents:[],media:{}},a.mediaObjectReady=function(e,t,n,r){var s=a.state.media;s[e]=[n,t,r],a.setState({media:s})},a.mediaObjectOffline=function(e){var t=a.state.media;delete t[e],a.setState({media:t})},a.onBroadcastEvent=function(e){var t=a.state.broadcastEvents;t.push(e),a.setState({broadcastEvents:t})},a.renderStream=function(){var e=Object.keys(a.state.media);return console.log("Rendering "+e.length+" stream parts"),r.a.createElement("div",{className:"stream-content"},e.map((function(e,t){return r.a.createElement(W,{key:t,notDraggable:!0,mediaObject:a.state.media[e]})})))},a.renderConsole=function(){return r.a.createElement("div",{className:"console-watcher"},a.state.broadcastEvents.map((function(e,t){var n;return n="object"===typeof e?JSON.stringify(e):e,r.a.createElement("p",{key:t},n)})))},a.broadcastViewerClient=G({channelName:a.props.channelName,onEvent:a.onBroadcastEvent,mediaObjectReady:a.mediaObjectReady,mediaObjectOffline:a.mediaObjectReady}),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.broadcastViewerClient.watchChannel(this.props.channelName)}},{key:"render",value:function(){return r.a.createElement(m,{top:20,left:60,width:1200,height:600,className:"watch-stream",title:this.props.title,pid:this.props.pid,ipc:this.props.ipc,draggable:!1},r.a.createElement("div",{key:"rr",className:"stream-wrapper"},this.renderStream(),this.renderConsole()))}}]),n}(r.a.Component)),Q=(n(132),n(133),n(137),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).iconClicked=a.iconClicked.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"iconClicked",value:function(e){var t=this.props.icons[e];this.props.ipc(t.cmd,t.args)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app-icon-grid"},this.props.icons.map((function(t,n){var a=n%5,s=Math.floor(n/5),i={gridColumnStart:s,gridColumnEnd:s+1,gridRowStart:a,gridRowEnd:a+1,width:50,height:50,borderColor:"black",borderWidth:2};return r.a.createElement("div",{key:"icon"+n,style:i,onClick:function(){e.iconClicked(n)}},r.a.createElement("i",{className:"fas fa-lg fa-"+t.name}),r.a.createElement("br",null),t.title)})))}}]),n}(r.a.Component)),Z=function(e){var t={};e=e||"azure";return{file_get_stream:function(){var e=Object(w.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new WebSocket("/"+t);a.onopen=function(t){e(a)},a.onerror=n})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),get_files:function(){var n=Object(w.a)(b.a.mark((function n(){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M("/file/".concat(e,"/list"));case 2:return(a=n.sent)[0].forEach((function(e){t[e.fullPath]=e})),n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),file_get_meta:function(e,n){if(!t[e])throw n(null),new Error("File not registered");n({size:t[e].size||0,type:t[e].type||"file",modificationTime:t[e].updated_at&&new Date(t[e].updated_at)||null})},file_get_content:function(e){return new Promise((function(t,n){fetch(e).then((function(e){t({type:"text",payload:e.body()})})).catch(n)}))},upload_files:function(){var e=Object(w.a)(b.a.mark((function e(t,n,a){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=0;r<t.length;r++)s=t[0],fetch("/upload?basepath="+n,{body:s,method:"POST",headers:{contentType:s.type,"x-file-name":s.name,"x-file-size":s.size}}).then(function(){var e=Object(w.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:n=e.sent,console.log(n),a&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){alert(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}},$=/\.(gif|jpg|jpeg|tiff|png)$/i,ee=function(){var e;function t(){return new Promise((function(t,n){window.requestFileSystem(window.PERSISTENT,104857600,(function(n){e=n.root,t(e)}),(function(e){n(new Error("error requesting local fs"))}))}))}function n(n){return new Promise(function(){var a=Object(w.a)(b.a.mark((function a(r,s){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=4;break}return a.next=3,t();case 3:e=a.sent;case 4:e.getFile(n,{create:!1,exclusive:!1},(function(e){e.file((function(e){var t=e,n=new FileReader,a="text";n.onloadend=function(e){r({type:a,payload:this.result,file:t})},n.onerror=function(e){s(new Error("reader failed"))},$.test(e.name)?(a="image",n.readAsDataURL(e)):n.readAsText(e)}))}),(function(e){s(e)}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}function a(n,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(){var s=Object(w.a)(b.a.mark((function s(i,o){return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return s.next=3,t();case 3:e=s.sent;case 4:e.getFile(n,{create:!0,exclusive:!0},(function(e){a?e.createWriter((function(t){r&&t.seek(t.length);var n=new Blob([a],{type:"text/plain"});t.write(n),i(e)})):i(e)}),o);case 5:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}())}function r(e){return new Promise(function(){var n=Object(w.a)(b.a.mark((function n(a,r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:n.sent.getDirectory(e,{create:!1},(function(e){e.createReader().readEntries((function(e){a(e)}))}),r);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function s(e){return new Promise(function(){var t=Object(w.a)(b.a.mark((function t(n,a){var s,i,o,c,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],c=[],(i=[]).push(s={name:e,fullPath:"",id:0}),o.push(s),c[0]=[];case 7:if(!(i.length>0)){t.next=16;break}return(u=i.pop()).id=u.id||0,t.next=12,r(u.name);case 12:t.sent.forEach(function(){var e=Object(w.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id=o.length,o.push(t),c[u.id]=c[u.id]||[],c[u.id].push(t.id),t.isDirectory&&i.push(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=7;break;case 16:n([o,c]);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function i(e){alert(e.message)}function o(e,t){return new Promise((function(n,a){e.getFile(t.fullPath,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.write(t),n()}),i)}),i)}))}function c(e){return new Promise(function(){var n=Object(w.a)(b.a.mark((function n(a,r){var s,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:s=n.sent,i=0;case 4:if(!(i<e.length)){n.next=10;break}return n.next=7,o(s,e[i]);case 7:i++,n.next=4;break;case 10:a();case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}return window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.directoryEntry=window.directoryEntry||window.webkitDirectoryEntry,{get_files:function(){var e=Object(w.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),file_get_meta:function(e,n){try{t().then((function(t){t.getFile(e,{},(function(e){e.getMetadata((function(e){n({size:e.size||0,modificationTime:e.modificationTime})}),(function(e){n("error: "+e.message)}))}))}))}catch(a){n("error "+a.message)}},file_put_content:function(){var e=Object(w.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(t,n,!0);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),upload_files:function(){var e=Object(w.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),file_get_content:function(){var e=Object(w.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},te="localhost"===window.location.hostname?"http://localhost":"https://grepawk.com",ne="localhost"===window.location.hostname?"WS://localhost:8086":"https://grepawk.com/stdin",ae=function(e){return"chrome"==e?ee():"azure"==e?Z("azure"):"market"==e?Z("market"):void 0};ae.upload_file_market=function(){var e=Object(w.a)(b.a.mark((function e(t){var n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var r=new WebSocket(ne);r.onopen=function(s){r.send("#pathname: azure/market/"+t.name),r.send("#size: "+t.size),r.send("#contentType "+t.type);var i=new FileReader;i.onloadend=function(e){r.send(n.result),r.send("EOF")},i.readAsArrayBuffer(t),r.onmessage=function(t){var n=t.data;n.toString().startsWith("URL: ")?(r.close(),e(n.replace("URL: ",""))):n.toString().startsWith("ERROR: ")&&(r.close(),a(new Error(n.replace("ERROR: ",""))))}}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae.api_post_json=function(e,t){return new Promise((function(n,a){fetch(te+"/api"+e,{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-cache",body:JSON.stringify(t)}).then((function(e){return e.json()})).then(n).catch(a)}))};var re=ae,se=n(56),ie=n.n(se),oe=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){if(a.props.vfs&&!1===a.fetchingMeta){a.fetchingMeta=!0;var e=Object(l.a)(a);a.props.vfs.file_get_meta(a.props.file.fullPath,(function(t){null!==t&&t!==e.state.fileMetaDescriptor&&e.setState({fileMetaDescriptor:t}),e.fetchingMeta=!1}))}},a.state={fileMetaDescriptor:{}},a.fetchingMeta=!1,a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.rowIndex,n=this.props.file,a=(this.state.fileMetaDescriptor.size,this.state.fileMetaDescriptor.type||n.isDirectory,{paddingLeft:"5px",color:"#D7D7D7",backgroundColor:t%2===0?"#2A2A2A":"#242424",height:"50px",position:"relative"}),s=!0===n.isDirectory?"fa-folder":"fa-file";return r.a.createElement("div",{style:a,onClick:function(){n.isDirectory?e.props.clickedDir(n):e.props.clickedFile(n)}},r.a.createElement("div",null,r.a.createElement("span",{style:{position:"absolute",top:2,left:2,width:20,height:48}},r.a.createElement("i",{className:"fas fa-lg "+s}," ")),r.a.createElement("span",{style:{position:"absolute",top:2,left:25,width:100,height:48}},n.name),r.a.createElement("span",{style:{position:"absolute",top:2,right:5,width:100,height:48}},this.state.fileMetaDescriptor.modificationTime?r.a.createElement(ie.a,{format:"YYYY/MM/DD",date:this.state.fileMetaDescriptor.modificationTime}):null)),r.a.createElement("div",null))}}]),n}(r.a.Component),ce=(n(139),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(w.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getFiles();case 1:case"end":return e.stop()}}),e)}))),a.getFiles=Object(w.a)(b.a.mark((function e(){var t,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.vfs.get_files();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[[],[]];case 5:r=e.t0,s=Object(R.a)(r,2),t=s[0],n=s[1],a.setState({files:t,edges:n});case 10:case"end":return e.stop()}}),e)}))),a.get_full_path=function(e){return a.state.dirs.map((function(e){return e.name})).concat(e).join("/")},a.add_file=Object(w.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=prompt("Enter file name"),a.setState({isComposing:!0,composingTitle:a.get_full_path(t),composingContent:a.state.composingContent||""});case 2:case"end":return e.stop()}}),e)}))),a.upload_to_vfs=function(){var e=Object(w.a)(b.a.mark((function e(t){var n,r,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((n=t.target.files||[]).length<1)){e.next=4;break}return e.abrupt("return");case 4:for(r=[],s=0;s<n.length;s++)(i=n.item(s)).fullPath=a.get_full_path(i.name),r.push(i);return e.next=8,a.vfs.upload_files(r,a.getFullBasePath(),(function(e){a.setState({updateMessage:e})}));case 8:a.getFiles(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.prompt_array=function(e){var t=[];return e.forEach((function(e,n){t.push(prompt("question: "+e))})),t},a.renderPreview=function(){var e=a.state.previewFile;return e?r.a.createElement("div",{style:{position:"absolute",left:"55%",top:"5%",height:"95%",width:"40%",backgroundColor:"transparent"}},a.state.updateMessage?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12",style:{height:30,overflow:"scroll"}},a.state.updateMessage)):null,r.a.createElement("div",{className:"row"},a.state.previewFile.fullPath),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"md-col-10 ht-70 bg-light"},a.renderPreviewContent())),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"md-col-10"},r.a.createElement("p",null,"Size: ",e.size),r.a.createElement("p",null,"Type: ",e.type))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"md-col-3"},r.a.createElement("button",{class:"btn btn-primary",onClick:function(t){a.setState({isPublishing:!0,fileBeingPublished:e})}}," Publish ")))):null},a.renderPreviewContent=function(){return null!==a.state.previewURL?a.state.previewContentType.includes("image")?r.a.createElement("img",{style:{objectFit:"fill"},width:320,height:400,src:a.state.previewURL}):r.a.createElement("iframe",{width:320,height:400,src:a.state.previewURL}):null!==a.state.previewText?r.a.createElement("div",{height:"50%",width:"100%"},a.state.previewText):void 0},a.renderFileInfo=function(e){return e?r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",{colspan:4},r.a.createElement("p",null,"Size: ",e.size),r.a.createElement("p",null,"Type: ",e.type)))):""},a.clickedFile=function(){var e=Object(w.a)(b.a.mark((function e(t){var n,r,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("azure"!==a.props.fs_type&&"market"!==a.props.fs_type){e.next=14;break}return e.prev=1,n="",e.next=5,a.vfs.file_get_stream(t.fullPath);case 5:r=e.sent,s=[],r.onmessage=function(e){if(e.data&&e.data.toString().startsWith("Content-Type: "))n=e.data.toString().replace("Content-Type: ","");else if(e.data&&n){s=s.concat(e.data);var r=URL.createObjectURL(new Blob(s),{type:n});a.setState({previewFile:t,previewURL:r,previewContentType:n})}},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0.lineNumber+":"+e.t0.message);case 13:return e.abrupt("return");case 14:return e.prev=14,e.next=17,a.vfs.file_get_content(t.fullPath);case 17:(i=e.sent).type=i.type||"text","text"===i.type?a.setState({previewURL:null,previewText:i.payload,previewFile:i.file}):"image"===i.type&&a.setState({previewText:null,previewURL:i.payload,previewFile:i.file}),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(14),alert(e.t1.lineNumber+":"+e.t1.message);case 25:case"end":return e.stop()}}),e,null,[[1,10],[14,22]])})));return function(t){return e.apply(this,arguments)}}(),a.clickedDir=function(){var e=Object(w.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.dirs.concat(t),a.setState({dirs:n,current_node_id:t.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.backDir=function(e){if(0!==e){var t,n=[];for(t in a.state.dirs)if(n.push(a.state.dirs[t]),e==a.state.dirs[t].id)break;a.setState({dirs:n,current_node_id:e})}else a.setState({dirs:[],current_node_id:0})},a.getFullBasePath=function(){return a.state.fs_type+"/"+a.state.dirs.map((function(e){return e.name})).join("/")},a.renderBreadCrumb=function(){return r.a.createElement("span",{style:{position:"absolute",top:0,left:0,height:"20px",width:"100%"}},r.a.createElement("a",{onClick:function(){return a.backDir(0),!1}},a.state.fs_type+" >"),a.state.dirs.map((function(e){return r.a.createElement("a",{onClick:function(){return a.backDir(e.id),!1}},e.name+" >")})))},a.renderBody2=function(){var e=[],t=a.state.files||[];"flat"===a.state.edges?e=t:(a.state.edges[a.state.current_node_id]||[]).forEach((function(n){e.push(t[n])}));return r.a.createElement("div",null,r.a.createElement("div",{className:"file_list",style:{position:"absolute",top:"20px",height:"calc(100% - 60px)",left:0,color:"#D7D7D7",width:"47%",overflow:"scroll",paddingLeft:"2%",backgroundColor:"#2A2A2A"}},0===e.length?r.a.createElement("div",null,"NO Files"):e.map((function(e,t){return r.a.createElement(oe,{vfs:a.vfs,rowIndex:t,file:e,clickedDir:a.clickedDir,clickedFile:a.clickedFile})}))),r.a.createElement("div",{className:"Controls",style:{position:"absolute",bottom:"0px",height:"40px",width:"95%",left:0,float:"right",padding:5}},r.a.createElement("button",{className:"btn primary",onClick:a.add_file},"Compose"),"\xa0","\xa0",1==a.state.isUploadingFiles?r.a.createElement("input",{type:"file",multiple:!0,className:"btn primary",onChange:a.upload_to_vfs}):r.a.createElement("button",{className:"btn",onClick:function(){a.setState({isUploadingFiles:!0})}},"Upload")))},a.publishFile=function(){var e=Object(w.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.upload_file_market(a.state.fileBeingPublished);case 2:n=e.sent,re.api_post_json("/listing",{uuid:a.props.userInfo.uuid,title:t.title,price:t.price,url:n,tags:t.tags.split(",")}).then((function(e){"OK"===e.status&&alert("Posting Successful"),a.setState({isPublishing:!1})})).catch((function(e){alert(e.message),a.setState({isPublishing:!1})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={info:"finder",dirs:e.dirs||[],current_node_id:e.current_node_id||0,fs_type:e.fs_type||"chrome",files:e.files||[],edges:e.edges||[],updateMessage:"",previewURL:null,previewText:null,previewFile:null,previewContentType:"",fileBeingPublished:null,isUploadingFiles:!1,isPublishing:!1,isComposing:!1,composingContent:null},a.vfs=re(e.fs_type),a.composer=r.a.createRef(),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(m,{width:1e3,height:600,left:220,ipc:this.props.ipc,icon:"computer",title:"My Computer"},r.a.createElement("div",{className:"anchor"},this.renderBreadCrumb(),this.renderBody2(),this.renderPreview()),this.state.isPublishing?r.a.createElement(S,{onSubmit:this.publishFile,onClose:function(){e.setState({isPublishing:!1})},questions:["title","price","tags"],initialAnswers:{title:this.state.fileBeingPublished.name,price:10,tags:"newFile"},questionTypes:["string","numeric","array"],title:"Publish Content"}):null,!1!==this.state.isComposing?r.a.createElement(j,{vfs:this.vfs,mode:"javascript",path:this.getFullBasePath()+"/"+this.state.composingTitle,value:this.state.composingContent||"",onChange:function(t){return e.setState({composingContent:t})},name:this.state.composingTitle,onClose:function(){e.setState({isComposing:!1})}}):null)}}]),n}(r.a.Component)),ue=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderSearchBar=function(){return r.a.createElement(O,null)},a.ipc=a.ipc.bind(Object(l.a)(a)),a.state={processes:[],userInfo:{name:"guest",xp:0,gold:0},quests:[],icons:[{name:"folder",title:"Local Files",cmd:"finder",args:["chrome"]},{name:"folder",title:"Public Files",cmd:"finder",args:["azure"]},{name:"folder",title:"Content Market",cmd:"finder",args:["market"]},{name:"terminal",title:"terminal",cmd:"tty",args:[]},{name:"broadcast-tower",title:"Broadcast",cmd:"stream",args:[]},{name:"play-circle",title:"Watch Hearthstone",cmd:"watch",args:["r5rogue"]},{name:"shipping-fast",title:"Write Javascript",cmd:"compose",args:["javascript"]}],files:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;if("/"!==window.location.pathname){var t=window.location.pathname.split("/").splice(1);1===t.length?this.ipc("watch",t):2==t.length&&this.ipc(t[0],t.splice(1))}else if(window.location.search){var n=window.location.search.replace("?","").split("/"),a=n[0],r=n.splice(1);this.ipc(a,r)}else this.ipc("tty",[]);M("/api/checkin?uuid="+T()).then((function(t){e.setState({userInfo:t})})).catch((function(e){}))}},{key:"ipc",value:function(e,t){switch(console.log("desktop ipc ",e,t),e){case"files":var n=t;this.setFiles(n),this.setState({processes:s});break;case"close":var a=t[0],r=this.state.processes;r[a]="closed",this.setState({processes:r});break;case"edit":var s=this.state.processes.concat({name:"iframe",url:"/api/files/edit?url="+t[0]+"&context="+t[1]});this.setState({processes:s});break;case"cam":case"camera":case"broadcast":case"stream":case"watch":case"tty":case"compose":case"finder":s=this.state.processes.concat({name:e,args:t});this.setState({processes:s});break;case"hud-update":this.setState({userInfo:t});break;case"questlist":this.setState({quests:t})}}},{key:"renderBody",value:function(){var e=this;return this.state.processes.map((function(t,n){if(console.log(t,n),"off"===t.state)return null;if("tty"===t.name)return r.a.createElement(I,{key:"tty1",pid:n,title:"Telnet",ipc:e.ipc});if("camera"===t.name)return r.a.createElement(J,{userInfo:e.state.userInfo,pid:n,title:"Face 2 Face",ipc:e.ipc});if("stream"===t.name)return r.a.createElement(V,{args:t.args,channel:t.args[0]||"",pid:n,title:"Broadcast",ipc:e.ipc});if("watch"===t.name){var a=t.args[0]||"default";return r.a.createElement(K,{userInfo:e.state.userInfo,channelName:a,pid:n,title:"Watch",ipc:e.ipc})}if("iframe"===t.name)return r.a.createElement("iframe",{width:"90%",height:"80%",src:t.url});if("finder"===t.name){var s=t.args[0]||"";return r.a.createElement(ce,Object(o.a)({userInfo:e.state.userInfo,ipc:e.ipc,title:"Finder",fs_type:s},"ipc",e.ipc))}return"compose"===t.name?r.a.createElement(j,{userInfo:e.state.userInfo,title:"write code",ipc:e.ipc}):void 0}))}},{key:"renderHud",value:function(){return this.state.userInfo?r.a.createElement(B,{username:this.state.userInfo.username,cwd:this.state.userInfo.cwd,fname:this.state.userInfo.fname,xp:this.state.userInfo.xp,gold:this.state.userInfo.gold}):null}},{key:"renderQuestView",value:function(){return r.a.createElement(h,{className:"quest-list",title:"quests",list:this.state.quests})}},{key:"renderBackground",value:function(){return r.a.createElement(Q,{icons:this.state.icons,ipc:this.ipc})}},{key:"render",value:function(){return r.a.createElement("div",{className:"desktop"},r.a.createElement("nav",{style:{width:"100vw",height:"18px"},className:"navbar navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"GrepAwk"),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link btn",href:"#"},"Compose"))),this.renderHud()),r.a.createElement("div",{style:{top:"0",position:"absolute",width:"100vw",height:"calc(100% - 18px)"}},this.renderBackground(),this.renderBody(),this.renderQuestView(),this.renderSearchBar()))}}]),n}(r.a.Component);i.a.render(r.a.createElement(ue,null),document.getElementById("root"))},57:function(e,t,n){e.exports=n(140)},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){}},[[57,1,2]]]);
//# sourceMappingURL=main.158c2ecd.chunk.js.map